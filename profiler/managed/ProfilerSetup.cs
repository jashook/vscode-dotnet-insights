////////////////////////////////////////////////////////////////////////////////
// Module: ProfilerSetup.cs
////////////////////////////////////////////////////////////////////////////////

namespace ev31 {

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

using System;

using Microsoft.Diagnostics.NETCore.Client;

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

public class ProfilerSetup
{
    private DiagnosticsClient Client { get; set; }

    public ProfilerSetup(int processId)
    {
        this.Client = new DiagnosticsClient(processId);

        Guid profilerGuid = Guid.Parse("cf0d821e-299b-5307-a3d8-b283c03916dd");

        this.Client.AttachProfiler(
            TimeSpan.FromMinutes(10),
            profilerGuid,
            "/Users/jashoo/projects/vscode-dotnet-insights/profiler/native/build/libev31_profiler.dylib" // Profiler path
        );
    }
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

} // namespace (ev31)

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////